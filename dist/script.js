(()=>{"use strict";const e=(e,t,l,n)=>{let o=1,s=!1;const a=document.querySelectorAll(e);function c(e){e>a.length&&(o=1),e<1&&(o=a.length),a.forEach((e=>{e.classList.add("animated"),e.style.display="none"})),a[o-1].style.display="block"}function r(e){c(o+=e)}c(o);try{const e=document.querySelector(l),t=document.querySelector(n);e.addEventListener("click",(()=>{r(-1),a[o-1].classList.remove("slideInRight"),a[o-1].classList.add("slideInLeft")})),t.addEventListener("click",(()=>{r(1),a[o-1].classList.remove("slideInLeft"),a[o-1].classList.add("slideInRight")}))}catch(e){}function i(){s="vertical"===t?setInterval((()=>{r(1),a[o-1].classList.add("slideInDown")}),3e3):setInterval((()=>{r(1),a[o-1].classList.remove("slideInLeft"),a[o-1].classList.add("slideInRight")}),3e3)}i(),a[0].parentNode.addEventListener("mouseenter",(()=>{clearInterval(s)})),a[0].parentNode.addEventListener("mouseleave",(()=>{i()}))},t=e=>{function t(e){let t="+7 (___) ___ __ __",l=0,n=t.replace(/\D/g,""),o=this.value.replace(/\D/g,"");n.length>=o.length&&(o=n),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&l<o.length?o.charAt(l++):l>=o.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let l=t.createTextRange();l.collapse(!0),l.moveEnd("character",e),l.moveStart("character",e),l.select()}})(this.value.length,this)}document.querySelectorAll(e).forEach((e=>{e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t)}))},l=e=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("keypress",(function(e){e.key.match(/[^а-яё 0-9]/gi)&&e.preventDefault()}))}))},n=e=>{const t=document.querySelectorAll(e);t.forEach((e=>{e.addEventListener("click",(function(){t.forEach((e=>{e!==this?(e.classList.remove("active-style"),e.nextElementSibling.classList.remove("active-content"),e.nextElementSibling.style.maxHeight="0px"):(this.classList.toggle("active-style"),this.nextElementSibling.classList.toggle("active-content"),this.classList.contains("active-style")?this.nextElementSibling.style.maxHeight=this.nextElementSibling.scrollHeight+"80px":this.nextElementSibling.style.maxHeight="0px")}))}))}))},o=e=>{const t=document.querySelector(e);window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>1650?(t.classList.add("animated","fadeIn"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("fadeIn"))}));const l=document.documentElement,n=document.body;t.addEventListener("click",(function(e){let t=Math.round(n.scrollTop||l.scrollTop);if(""!==this.hash){e.preventDefault();let o=document.querySelector(this.hash),s=0;for(;o.offsetParent;)s+=o.offsetTop,o=o.offsetParent;s=Math.round(s),((e,t,o)=>{let s,a;a=t>e?30:-30;let c=setInterval((function(){let r=Math.round(n.scrollTop||l.scrollTop);s===r||t>e&&r>=t||t<e&&r<=t?(clearInterval(c),history.replaceState(history.state,document.title,location.href.replace(/#.*$/g,"")+o)):(n.scrollTop+=a,l.scrollTop+=a,s=r)}),1)})(t,s,this.hash)}}))};window.addEventListener("DOMContentLoaded",(()=>{let s={selector:".calc-price",success:"Ваш заказ отправлен.",failure:"Пожалуйста, укажите размер и материал картины."};var a;(()=>{let e=!1;function t(t,n,o){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=document.querySelectorAll(t),c=document.querySelector(n),r=document.querySelector(o),i=document.querySelectorAll("[data-modal]"),d=l();i.forEach((e=>{e.classList.add("animated","fadeIn")})),a.forEach((t=>{t.addEventListener("click",(l=>{l.target&&l.preventDefault(),s&&t.remove(),e=!0,i.forEach((e=>{e.style.display="none"})),c.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${d}px`}))})),r.addEventListener("click",(()=>{c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"})),c.addEventListener("click",(e=>{e.target===c&&(c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")}))}function l(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}t(".button-design",".popup-design",".popup-design .popup-close"),t(".button-consultation",".popup-consultation",".popup-consultation .popup-close"),t(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0),window.addEventListener("scroll",(()=>{let t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);!e&&window.pageYOffset+document.documentElement.clientHeight>=t&&document.querySelector(".fixed-gift").click()})),setTimeout((()=>{let e;if(document.querySelectorAll("[data-modal]").forEach((t=>{"none"!==window.getComputedStyle(t).display&&(e="block")})),!e){document.querySelector(".popup-consultation").style.display="block",document.body.style.overflow="hidden";let e=l();document.body.style.marginRight=`${e}px`}}),5e3)})(),e(".main-slider-item","vertical"),e(".feedback-slider-item","",".main-prev-btn",".main-next-btn"),(e=>{const t=document.querySelectorAll("form"),l=document.querySelectorAll("input"),n=document.querySelectorAll('[name="upload"]'),o=document.querySelectorAll("textarea"),s=document.querySelectorAll("select");n.forEach((e=>{e.addEventListener("input",(()=>{let t;const l=e.files[0].name.split(".");t=e.files[0].name.length>6?"...":".";const n=l[0].substring(0,6)+t+l[1];e.previousElementSibling.textContent=n}))})),t.forEach((t=>{t.addEventListener("submit",(a=>{a.preventDefault();const c=document.createElement("div");c.classList.add("status"),t.parentNode.appendChild(c),t.classList.add("animated","fadeOutUp"),setTimeout((()=>{t.style.display="none"}),400);const r=document.createElement("img");r.setAttribute("src","assets/img/spinner.gif"),c.appendChild(r);const i=document.createElement("div");i.textContent="Пожалуйста, подождите. Идёт загрузка...",c.appendChild(i);const d=new FormData(t);let u;if(u=t.closest(".popup-design")||t.classList.contains("calc_form")?"assets/server.php":"assets/question.php","calc"===t.getAttribute("data-form")){const t=document.querySelector(e.selector);/\d/.test(e.result)?(d.append("sum",e.result),t.textContent=e.success):t.textContent=e.failure}(async(e,t)=>{let l=await fetch(e,{method:"POST",body:t});return await l.text()})(u,d).then((e=>{console.log(e),r.setAttribute("src","assets/img/ok.png"),i.textContent="Спасибо! Мы с Вами свяжемся."})).catch((()=>{r.setAttribute("src","assets/img/fail.png"),i.textContent="Что-то пошло не так..."})).finally((()=>{l.forEach((e=>{e.value=""})),n.forEach((e=>{e.previousElementSibling.textContent="Файл не выбран"})),o.forEach((e=>{e.value=""})),s.forEach((e=>{e.value=""})),setTimeout((()=>{c.remove(),t.style.display="block",t.classList.remove("fadeOutUp"),t.classList.add("fadeInUp")}),5e3)}))}))}))})(s),t('[name="phone"]'),l('[name="name"]'),l('[name="message"]'),((e,t)=>{const l=document.querySelectorAll(t),n=document.querySelector(e);l.forEach((e=>{e.classList.add("animated","fadeInUp")})),n.addEventListener("click",(()=>{l.forEach((e=>{e.classList.remove("hidden-lg","hidden-md","hidden-sm","hidden-xs"),e.classList.add("col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1")})),n.remove()}))})(".button-styles",".styles-2"),((e,t,l,n,o,s)=>{const a=document.querySelector(e),c=document.querySelector(t),r=document.querySelector(l),i=document.querySelector(n),d=document.querySelector(o);let u=0;function m(){u=Math.round(+a.value*+c.value+ +r.value),""==a.value||""==c.value?d.textContent="Пожалуйста, укажите размер и материал картины.":"IWANTPOPART"===i.value?d.textContent=Math.round(.7*u):d.textContent=u,s.result=d.textContent}a.addEventListener("change",m),c.addEventListener("change",m),r.addEventListener("change",m),i.addEventListener("input",m)})("#size","#material","#options",".promocode",".calc-price",s),(()=>{const e=document.querySelector(".portfolio-menu"),t=e.querySelectorAll("li"),l=document.querySelector(".portfolio-wrapper"),n=l.querySelectorAll(".all"),o=document.querySelector(".portfolio-no"),s=t=>{let s=e.querySelector(t),a=l.querySelectorAll(t);s.addEventListener("click",(()=>{var e;e=a,n.forEach((e=>{e.classList.remove("animated","fadeIn"),e.style.display="none"})),o.classList.remove("animated","fadeIn"),o.style.display="none",e.length>=1?e.forEach((e=>{e.classList.add("animated","fadeIn"),e.style.display="block"})):(o.classList.add("animated","fadeIn"),o.style.display="block")}))};e.addEventListener("click",(e=>{let l=e.target;l&&"LI"==l.tagName&&(t.forEach((e=>{e.classList.remove("active")})),l.classList.add("active"))})),s(".all"),s(".lovers"),s(".chef"),s(".girl"),s(".guy"),s(".grandmother"),s(".granddad")})(),a=".sizes-block",document.querySelectorAll(a).forEach((e=>{e.addEventListener("mouseover",(()=>{!function(e){let t=e.querySelector("img");t.src=t.src.slice(0,-4)+"-1.png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>{e.style.display="none"}))}(e)})),e.addEventListener("mouseout",(()=>{!function(e){let t=e.querySelector("img");t.src=t.src.slice(0,-6)+".png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>{e.style.display="block"}))}(e)}))})),n(".accordion-heading"),((e,t)=>{const l=document.querySelector(e),n=document.querySelector(t);l.style.display="none",n.addEventListener("click",(()=>{"none"==l.style.display&&window.screen.availWidth<993?l.style.display="block":l.style.display="none"})),window.addEventListener("resize",(()=>{"block"==l.style.display&&window.screen.availWidth>992&&(l.style.display="none")}))})(".burger-menu",".burger"),(()=>{const e=document.querySelectorAll('[name="upload"]');function t(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragleave","dragover","drop"].forEach((l=>{e.forEach((e=>{e.addEventListener(l,t,!1)}))})),["dragenter","dragover"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{var t;(t=e).closest(".file_upload").style.border="5px solid yellow",t.closest(".file_upload").style.backgroundColor="rgba(0, 0, 0, .7)"}),!1)}))})),["dragleave","drop"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{var t;(t=e).closest(".file_upload").style.border="",t.closest('[data-form="calc"]')?t.closest(".file_upload").style.backgroundColor="#fff":t.closest(".file_upload").style.backgroundColor="#ededed"}),!1)}))})),e.forEach((e=>{e.addEventListener("drop",(t=>{let l;e.files=t.dataTransfer.files;const n=e.files[0].name.split(".");l=e.files[0].name.length>6?"...":".";const o=n[0].substring(0,6)+l+n[1];e.previousElementSibling.textContent=o}))}))})(),o(".pageup")}))})();